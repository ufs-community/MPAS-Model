<!-- **************************************************************************************** -->
<!-- ************************************** Dimensions ************************************** -->
<!-- **************************************************************************************** -->

        <dims>
           <dim name="nChem"              definition="namelist:num_chem"
               description="Number of chemical tracers (nscalar minus nmoist)"/>
           <dim name="nkanthro"             definition="namelist:kanthro"
               description="Number of vertical levels in anthropogenic emission file"/>
           <dim name="nkwildfire"             definition="namelist:kwildfire"
               description="Number of vertical levels in biomass burning emission file"/>
           <dim name="nkbiogenic"             definition="namelist:kbiogenic"
               description="Number of vertical levels in biogenic emission file"/>
           <dim name="nkvolcanic"             definition="namelist:kvolcanic"
               description="Number of vertical levels in volcanic emission file"/>
        </dims>


<!-- **************************************************************************************** -->
<!-- ************************************** Namelists *************************************** -->
<!-- **************************************************************************************** -->

   <nml_record name="chemistry" in_defaults="true">
      <nml_option name="config_smoke_scheme" type="character" default_value="off" in_defaults="false"
           units="-"
           description="configuration for mpas smoke model"
           possible_values="`on',`off'"/>
      <nml_option name="config_dust_scheme" type="character" default_value="off" in_defaults="false"
           units="-"
           description="configuration for mpas dust model"
           possible_values="`on',`off'"/>
      <nml_option name="num_chem" type="integer" default_value="0"
           units="-"
           description="Number of chemical tracers"
           possible_values="Positive integer values"/>
      <nml_option name="kanthro" type="integer" default_value="1"
           units="-"
           description="Number of vertical levels in anthropogenic emission input"
           possible_values="Positive integer values"/>
      <nml_option name="kwildfire" type="integer" default_value="1"
           units="-"
           description="Number of vertical levels in biomaass burning emission input"
           possible_values="Positive integer values"/>
      <nml_option name="kbiogenic" type="integer" default_value="1"
           units="-"
           description="Number of vertical levels in biogenic emission input"
           possible_values="Positive integer values"/>
      <nml_option name="kvolcanic" type="integer" default_value="1"
           units="-"
           description="Number of vertical levels in volcanic emission input"
           possible_values="Positive integer values"/>
      <nml_option name="hwp_method" type="integer" default_value="1"
           units="-"
           description="Algorithm choice for the hourly wildfire potential"
           possible_values="Positive integer values"/>
      <nml_option name="ebb_dcycle" type="integer" default_value="0"
           units="-"
           description="Algorithm choice wildfire emission forecast"
           possible_values="Positive integer values"/>
   </nml_record>

<!-- **************************************************************************************** -->
<!-- **************************************  Packages  ************************************** -->
<!-- **************************************************************************************** -->
        <packages>
         <package name="mpas_smoke_in"  description="parameterization of smoke."/>
         <package name="mpas_dust_in"   description="parameterization of dust"/>
         <package name="mpas_anthro_in" description="parameterization of anthropogenic emissions for mpas-smoke"/>
         <package name="mpas_aerosols_in" description="parameterization of mpas aerosols"/>
        </packages>


<!-- **************************************************************************************** -->
<!-- *************************************** Streams **************************************** -->
<!-- **************************************************************************************** -->

	<streams>
<!--
		<stream name="input"
                        type="input"
                        filename_template="x1.40962.grid.nc"
                        input_interval="initial_only"
                        immutable="true">

		</stream>

		<stream name="output"
                        type="output"
                        filename_template="x1.40962.init.nc"
                        output_interval="initial_only"
                        packages="initial_conds"
                        immutable="true">
		</stream>
-->
		<stream name="lbc"
                        type="output"
                        filename_template="lbc.$Y-$M-$D_$h.$m.$s.nc"
                        output_interval="3:00:00"
                        filename_interval="output_interval"
                        packages="lbcs"
                        immutable="true">

			<var name="xtime"/>
			<var name="Time"/>
			<var_struct name="lbc_state"/>
		</stream>

	</streams>


<!-- **************************************************************************************** -->
<!-- ************************************** Variables *************************************** -->
<!-- **************************************************************************************** -->

        <var_struct name="state" time_levs="1">
                <var_array name="scalars" type="real" dimensions="nVertLevels nCells Time" packages="met_stage_out">

                      <var name="MASSDEN" array_group="chemistry" units="kg kg^{-1}"
                           description="fine smoke mixing ratio"/>

                      <var name="smoke_fine" array_group="chemistry" units="kg kg^{-1}"
                           description="fine smoke mixing ratio"
                           packages="mpas_smoke_in"/>

                      <var name="dust_fine" array_group="chemistry" units="kg kg^{-1}"
                           description="fine dust mixing ratio"
                           packages="mpas_dust_in;mpas_anthro_in"/>
 
                      <var name="dust_coarse" array_group="chemistry" units="kg kg^{-1}"
                           description="coarse dust mixing ratio"
                           packages="mpas_dust_in;mpas_anthro_in"/>
        </var_struct>

        <var_struct name="lbc_state" time_levs="1">
                <var_array name="lbc_scalars" type="real" dimensions="nVertLevels nCells Time" packages="lbcs">
                        <var name="lbc_smoke_fine" array_group="chemistry"  packages="mpas_smoke_in" units="kg kg^{-1} s^{-1}"
                             description="Lateral boundary tendency of fine smoke mixing ratio"/>

                        <var name="lbc_dust_fine" array_group="chemistry"  packages="mpas_dust_in" units="kg kg^{-1} s^{-1}"
                             description="Lateral boundary tendency of fine dust mixing ratio"/>
  
                        <var name="lbc_dust_coarse" array_group="chemistry"  packages="mpas_dust_in" units="kg kg^{-1} s^{-1}"
                             description="Lateral boundary tendency of coarse dust mixing ratio"/>

                        <var name="lbc_MASSDEN" array_group="chemistry" units="kg kg^{-1} s^{-1}"
                             description="Lateral boundary tendency of fine smoke mixing ratio"/>
                </var_array>

        </var_struct>

        <var_struct name="fg" time_levs="1">
                <var name="MASSDEN_fg" name_in_code="MASSDEN" type="real" dimensions="nFGLevels nCells Time" units="kg^{-1}"
		     description="First guess smoke aerosols"/>
                <var name="smoke_fine_fg" name_in_code="smoke_fine" type="real" dimensions="nFGLevels nCells Time" units="kg^{-1}"
		     packages="mpas_smoke_in;mpas_anthro_in" description="First guess fine smoke aerosols"/>
                <var name="dust_fine_fg" name_in_code="dust_fine" type="real" dimensions="nFGLevels nCells Time" units="kg^{-1}"
		     packages="mpas_dust_in;mpas_anthro_in" description="First guess fine dust aerosols"/>
                <var name="dust_coarse_fg" name_in_code="dust_coarse" type="real" dimensions="nFGLevels nCells Time" units="kg^{-1}"
		     packages="mpas_dust_in;mpas_anthro_in" description="First guess coarse dust aerosols"/>
        </var_struct>
